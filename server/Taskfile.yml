# https://taskfile.dev

version: '3'

vars:
  GREETING: Hello, World!
  LIST: ./scripts/detect_distro.sh
  NFSD_TEST: ./scripts/nfsd_test.sh

dotenv: [".env"]

tasks:
  default:
    cmds:
      - bash {{ .LIST }}
    silent: true
  
  build:
    desc: "build docker image"
    cmds:
      #- docker build --rm --compress -t ${DOCKER_IMAGE}:${DOCKER_TAG} ./src
      - docker compose build
  
  start:
    desc: Start the service
    cmds:
      - bash {{ .NFSD_TEST }} 
      - docker compose up


  network:
    desc: create livenet network
    cmds:
      - |
        sudo ip link add name ${BRIDGE} type bridge
        sudo ip link set dev ${BRIDGE} up
    status:
      - ip link show br-livenet
